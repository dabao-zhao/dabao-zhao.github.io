<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Hugo 0.116.1">

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="author" content="赵大宝" />
  <meta property="og:url" content="https://dabao-zhao.github.io/posts/%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E5%A6%82%E4%BD%95%E5%AE%9A%E5%88%B6%E4%B8%80%E4%B8%AA%E5%88%86%E5%B8%83%E5%BC%8F%E9%93%BE%E8%B7%AF%E8%B7%9F%E8%B8%AA%E7%B3%BB%E7%BB%9F/" />
  <link rel="canonical" href="https://dabao-zhao.github.io/posts/%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E5%A6%82%E4%BD%95%E5%AE%9A%E5%88%B6%E4%B8%80%E4%B8%AA%E5%88%86%E5%B8%83%E5%BC%8F%E9%93%BE%E8%B7%AF%E8%B7%9F%E8%B8%AA%E7%B3%BB%E7%BB%9F/" /><link rel="apple-touch-icon" href="images/favicon.ico" />
  <link rel="icon" href="images/favicon.ico" />
  <link rel="shortcut" href="images/favicon.ico" /><link rel="alternate" type="application/atom+xml" href="https://dabao-zhao.github.ioindex.xml" title="赵大宝的博客">

  <script type="application/ld+json">
  {
      "@context" : "http://schema.org",
      "@type" : "BlogPosting",
      "mainEntityOfPage": {
           "@type": "WebPage",
           "@id": "https:\/\/dabao-zhao.github.io"
      },
      "articleSection" : "posts",
      "name" : "链路追踪：如何定制一个分布式链路跟踪系统",
      "headline" : "链路追踪：如何定制一个分布式链路跟踪系统",
      "description" : "Metrics、Tracing 和 Logging 常见监控系统主要有三种类型：Metrics、Tracing 和 Logging。\n常见的开源 Metrics 有 Zabbix、Nagios、Prometheus、InfluxDb、OpenFalcon。主要做各种量化指标汇总统计，比如监控系统的容量剩余、每秒请求量、平均响应速度、某个时段请求量多少。\n常见的开源链路跟踪有 Jaeger、Zipkin、Pinpoint、Skywalking。主要是通过分析每次请求链路监控分析的系统，可以通过 TraceID 查找一次请求的依赖及调用链路，分析故障点和传导过程的耗时。\n常见的开源 Logging 有 ELK、Loki、Loggly。主要是对文本日志的收集归类整理，可以对错误日志进行汇总、警告，并分析系统错误异常等情况。\n三种监控体系最大的区别就是日志格式标准。\nOpenTelemetry 标准 主要是对数据采集和标准规范的统一，其他的不参与。\nTODO 后面出个介绍\n分布式链路跟踪系统 主要功能服务：\n监控日志标准 埋点 SDK（AOP 或侵入式） 日志收集 分布式日志传输 分布式日志存储 分布式检索计算 分布式实时分析 个性化定制指标盘 系统警告 ELK 即可实现以上功能：\n日志收集（Filebeat） 日志传输（Kafka\u002bLogstash） 日志存储（Elasticsearch） 检索计算（Elasticsearch \u002b Kibana） 实时分析（Kibana） 个性定制表格查询（Kibana） 这样之后只需要制定日志格式和埋点 SDK 即可实现一个具有分布式链路跟踪、 Metrics、日志分析的系统。 这里提到的不只是 ELK，还有 EFK TODO 后面出个介绍\n原理 在请求发起方发送请求时或服务被请求时生成一个 UUID（TraceID），被请求期间的业务产生的任何日志（Warning、Info、Debug、Error）、任何依赖资源 请求（MySQL、Kafka、Redis）、任何内部接口调用（Restful、Http、RPC）都会带上这个 UUID。 这样，当我们把所有拥有同样 UUID 的日志收集起来时，就可以根据时间（有误差）、RPCID 或 SpanID，将它们按依赖请求顺序串起来。 只要日志足够详细，我们就能监控到系统大部分的工作状态，比如用户请求一个服务会调用多少个接口，每个数据查询的 SQL 以及具体耗时调用的内网请求参数是什么、 调用的内网请求返回是什么、内网被请求的接口又做了哪些操作、产生了哪些异常信息等等。 同时，我们可以通过对这些日志做归类分析，分析项目之间的调用关系、项目整体健康程度、 对链路深挖自动识别出故障点等，帮助我们主动、快速地查找问题。",
      "inLanguage" : "en-US",
      "author" : "赵大宝",
      "creator" : "赵大宝",
      "publisher": "赵大宝",
      "accountablePerson" : "赵大宝",
      "copyrightHolder" : "赵大宝",
      "copyrightYear" : "2023",
      "datePublished": "2023-08-15 15:50:03 \u002b0800 CST",
      "dateModified" : "2023-08-15 15:50:03 \u002b0800 CST",
      "url" : "https:\/\/dabao-zhao.github.io\/posts\/%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E5%A6%82%E4%BD%95%E5%AE%9A%E5%88%B6%E4%B8%80%E4%B8%AA%E5%88%86%E5%B8%83%E5%BC%8F%E9%93%BE%E8%B7%AF%E8%B7%9F%E8%B8%AA%E7%B3%BB%E7%BB%9F\/",
      "keywords" : [ "高并发系统实战课", ]
  }
</script>
<title>链路追踪：如何定制一个分布式链路跟踪系统</title>
  <meta property="og:title" content="链路追踪：如何定制一个分布式链路跟踪系统" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="Metrics、Tracing 和 Logging 常见监控系统主要有三种类型：Metrics、Tracing 和 Logging。
常见的开源 Metrics 有 Zabbix、Nagios、Prometheus、InfluxDb、OpenFalcon。主要做各种量化指标汇总统计，比如监控系统的容量剩余、每秒请求量、平均响应速度、某个时段请求量多少。
常见的开源链路跟踪有 Jaeger、Zipkin、Pinpoint、Skywalking。主要是通过分析每次请求链路监控分析的系统，可以通过 TraceID 查找一次请求的依赖及调用链路，分析故障点和传导过程的耗时。
常见的开源 Logging 有 ELK、Loki、Loggly。主要是对文本日志的收集归类整理，可以对错误日志进行汇总、警告，并分析系统错误异常等情况。
三种监控体系最大的区别就是日志格式标准。
OpenTelemetry 标准 主要是对数据采集和标准规范的统一，其他的不参与。
TODO 后面出个介绍
分布式链路跟踪系统 主要功能服务：
监控日志标准 埋点 SDK（AOP 或侵入式） 日志收集 分布式日志传输 分布式日志存储 分布式检索计算 分布式实时分析 个性化定制指标盘 系统警告 ELK 即可实现以上功能：
日志收集（Filebeat） 日志传输（Kafka&#43;Logstash） 日志存储（Elasticsearch） 检索计算（Elasticsearch &#43; Kibana） 实时分析（Kibana） 个性定制表格查询（Kibana） 这样之后只需要制定日志格式和埋点 SDK 即可实现一个具有分布式链路跟踪、 Metrics、日志分析的系统。 这里提到的不只是 ELK，还有 EFK TODO 后面出个介绍
原理 在请求发起方发送请求时或服务被请求时生成一个 UUID（TraceID），被请求期间的业务产生的任何日志（Warning、Info、Debug、Error）、任何依赖资源 请求（MySQL、Kafka、Redis）、任何内部接口调用（Restful、Http、RPC）都会带上这个 UUID。 这样，当我们把所有拥有同样 UUID 的日志收集起来时，就可以根据时间（有误差）、RPCID 或 SpanID，将它们按依赖请求顺序串起来。 只要日志足够详细，我们就能监控到系统大部分的工作状态，比如用户请求一个服务会调用多少个接口，每个数据查询的 SQL 以及具体耗时调用的内网请求参数是什么、 调用的内网请求返回是什么、内网被请求的接口又做了哪些操作、产生了哪些异常信息等等。 同时，我们可以通过对这些日志做归类分析，分析项目之间的调用关系、项目整体健康程度、 对链路深挖自动识别出故障点等，帮助我们主动、快速地查找问题。" />
  <meta name="description" content="Metrics、Tracing 和 Logging 常见监控系统主要有三种类型：Metrics、Tracing 和 Logging。
常见的开源 Metrics 有 Zabbix、Nagios、Prometheus、InfluxDb、OpenFalcon。主要做各种量化指标汇总统计，比如监控系统的容量剩余、每秒请求量、平均响应速度、某个时段请求量多少。
常见的开源链路跟踪有 Jaeger、Zipkin、Pinpoint、Skywalking。主要是通过分析每次请求链路监控分析的系统，可以通过 TraceID 查找一次请求的依赖及调用链路，分析故障点和传导过程的耗时。
常见的开源 Logging 有 ELK、Loki、Loggly。主要是对文本日志的收集归类整理，可以对错误日志进行汇总、警告，并分析系统错误异常等情况。
三种监控体系最大的区别就是日志格式标准。
OpenTelemetry 标准 主要是对数据采集和标准规范的统一，其他的不参与。
TODO 后面出个介绍
分布式链路跟踪系统 主要功能服务：
监控日志标准 埋点 SDK（AOP 或侵入式） 日志收集 分布式日志传输 分布式日志存储 分布式检索计算 分布式实时分析 个性化定制指标盘 系统警告 ELK 即可实现以上功能：
日志收集（Filebeat） 日志传输（Kafka&#43;Logstash） 日志存储（Elasticsearch） 检索计算（Elasticsearch &#43; Kibana） 实时分析（Kibana） 个性定制表格查询（Kibana） 这样之后只需要制定日志格式和埋点 SDK 即可实现一个具有分布式链路跟踪、 Metrics、日志分析的系统。 这里提到的不只是 ELK，还有 EFK TODO 后面出个介绍
原理 在请求发起方发送请求时或服务被请求时生成一个 UUID（TraceID），被请求期间的业务产生的任何日志（Warning、Info、Debug、Error）、任何依赖资源 请求（MySQL、Kafka、Redis）、任何内部接口调用（Restful、Http、RPC）都会带上这个 UUID。 这样，当我们把所有拥有同样 UUID 的日志收集起来时，就可以根据时间（有误差）、RPCID 或 SpanID，将它们按依赖请求顺序串起来。 只要日志足够详细，我们就能监控到系统大部分的工作状态，比如用户请求一个服务会调用多少个接口，每个数据查询的 SQL 以及具体耗时调用的内网请求参数是什么、 调用的内网请求返回是什么、内网被请求的接口又做了哪些操作、产生了哪些异常信息等等。 同时，我们可以通过对这些日志做归类分析，分析项目之间的调用关系、项目整体健康程度、 对链路深挖自动识别出故障点等，帮助我们主动、快速地查找问题。" />
  <meta property="og:locale" content="zh-cn" /><meta property="og:image" content="images/favicon.ico" />
  

  
    <style>body{font-family:bree serif,sans-serif;-webkit-font-smoothing:antialiased;margin:0 20px}article{max-width:800px;margin-left:auto;margin-right:auto}a{color:#000;text-decoration:none}a:hover{font-weight:600;text-decoration:underline}.post-ads{margin:50px 0}.markdown-body{font-size:18px;max-width:100%}.markdown-body a{text-decoration:underline;text-decoration-color:#000}.markdown-body blockquote{margin:0;padding:0 1em;color:#57606a;border-left:.25em solid #d0d7de}.markdown-body pre{padding:16px;overflow:auto;border-radius:10px}.markdown-body code{padding:.2em .4em;font-size:85%;background-color:#f6f8fa;border-radius:6px}.markdown-body pre>code{padding:0;font-size:100%;background-color:inherit;border:0}.Chinese .markdown-body{line-height:200%}.site-date-catalog{font-size:2rem}.header-title{font-size:2rem;font-weight:700;margin-top:32px;font-family:bungee shade,sans-serif}.header-title a{text-decoration:none}.header-subtitle{color:#666}.header-items{margin:10px 0}.header-item{margin:0 5px}.header-line{width:100%;border-width:2px;border-color:#482936;border-style:solid none none none}.lang-switch{font-weight:600}#posts-list{min-height:600px}.posts-line{font-size:1.2rem;margin:12px 0}.posts-categories{font-size:.8rem;margin:auto;text-align:center}.posts-category{padding:3px 0;border:#000 2px solid;border-radius:5px}.site-footer{margin-top:50px}.site-footer-item{margin-right:12px}.post-content img{max-width:100%;display:block;margin-right:auto;margin-top:12px}.post-header{margin-bottom:50px}.post-title{font-size:2rem;font-weight:600}.post-tags{display:inline;font-weight:600;padding:2px 5px;margin-right:6px;border:#000 2px solid;border-radius:5px}.post-date{font-weight:800;font-style:italic}.post-author{float:right;font-weight:600}.page-content{min-height:60%}.post-content{margin-bottom:50px}.post-content p{hyphens:auto;line-height:1.8;text-justify:ideographic;margin-bottom:1em}.related-content{border-width:3px;border-style:solid;border-color:#000;padding:0 10px;margin-bottom:50px;margin-top:100px}.related-content li{margin:5px 0}.taxonomy-term{font-size:3rem}.gallery-img{text-align:center}.gallery-img span{text-align:center}.gallery-img-desc{font-size:.8em;font-weight:800}#disqus_thread{position:relative}#disqus_thread:after{content:"";display:block;height:55px;width:100%;position:absolute;bottom:0;background:#fff}@media screen and (max-width:600px){.header-title,.header-subtitle,.header-items{text-align:center}.posts-line{font-size:16px}.markdown-body{font-size:16px}.post-title{font-size:2rem}.post-content p{letter-spacing:.05em}}@media screen and (max-width:48em){.posts-category{display:none}}</style>
  
  
    <style>.container,.container-fluid{margin-right:auto;margin-left:auto}.container-fluid{padding-right:2rem;padding-left:2rem}.row{box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:0 1 auto;flex:initial;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-.5rem;margin-left:-.5rem}.row.reverse{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.col.reverse{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.col-xs,.col-xs-1,.col-xs-10,.col-xs-11,.col-xs-12,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.col-xs-offset-0,.col-xs-offset-1,.col-xs-offset-10,.col-xs-offset-11,.col-xs-offset-12,.col-xs-offset-2,.col-xs-offset-3,.col-xs-offset-4,.col-xs-offset-5,.col-xs-offset-6,.col-xs-offset-7,.col-xs-offset-8,.col-xs-offset-9{box-sizing:border-box;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:none;padding-right:.5rem;padding-left:.5rem}.col-xs{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-preferred-size:0;flex-basis:0;max-width:100%}.col-xs-1{-ms-flex-preferred-size:8.33333333%;flex-basis:8.33333333%;max-width:8.33333333%}.col-xs-2{-ms-flex-preferred-size:16.66666667%;flex-basis:16.66666667%;max-width:16.66666667%}.col-xs-3{-ms-flex-preferred-size:25%;flex-basis:25%;max-width:25%}.col-xs-4{-ms-flex-preferred-size:33.33333333%;flex-basis:33.33333333%;max-width:33.33333333%}.col-xs-5{-ms-flex-preferred-size:41.66666667%;flex-basis:41.66666667%;max-width:41.66666667%}.col-xs-6{-ms-flex-preferred-size:50%;flex-basis:50%;max-width:50%}.col-xs-7{-ms-flex-preferred-size:58.33333333%;flex-basis:58.33333333%;max-width:58.33333333%}.col-xs-8{-ms-flex-preferred-size:66.66666667%;flex-basis:66.66666667%;max-width:66.66666667%}.col-xs-9{-ms-flex-preferred-size:75%;flex-basis:75%;max-width:75%}.col-xs-10{-ms-flex-preferred-size:83.33333333%;flex-basis:83.33333333%;max-width:83.33333333%}.col-xs-11{-ms-flex-preferred-size:91.66666667%;flex-basis:91.66666667%;max-width:91.66666667%}.col-xs-12{-ms-flex-preferred-size:100%;flex-basis:100%;max-width:100%}.col-xs-offset-0{margin-left:0}.col-xs-offset-1{margin-left:8.33333333%}.col-xs-offset-2{margin-left:16.66666667%}.col-xs-offset-3{margin-left:25%}.col-xs-offset-4{margin-left:33.33333333%}.col-xs-offset-5{margin-left:41.66666667%}.col-xs-offset-6{margin-left:50%}.col-xs-offset-7{margin-left:58.33333333%}.col-xs-offset-8{margin-left:66.66666667%}.col-xs-offset-9{margin-left:75%}.col-xs-offset-10{margin-left:83.33333333%}.col-xs-offset-11{margin-left:91.66666667%}.start-xs{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;text-align:start}.center-xs{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;text-align:center}.end-xs{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;text-align:end}.top-xs{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.middle-xs{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.bottom-xs{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.around-xs{-ms-flex-pack:distribute;justify-content:space-around}.between-xs{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.first-xs{-webkit-box-ordinal-group:0;-ms-flex-order:-1;order:-1}.last-xs{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}@media only screen and (min-width:48em){.container{width:49rem}.col-sm,.col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-offset-0,.col-sm-offset-1,.col-sm-offset-10,.col-sm-offset-11,.col-sm-offset-12,.col-sm-offset-2,.col-sm-offset-3,.col-sm-offset-4,.col-sm-offset-5,.col-sm-offset-6,.col-sm-offset-7,.col-sm-offset-8,.col-sm-offset-9{box-sizing:border-box;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:none;padding-right:.5rem;padding-left:.5rem}.col-sm{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-preferred-size:0;flex-basis:0;max-width:100%}.col-sm-1{-ms-flex-preferred-size:8.33333333%;flex-basis:8.33333333%;max-width:8.33333333%}.col-sm-2{-ms-flex-preferred-size:16.66666667%;flex-basis:16.66666667%;max-width:16.66666667%}.col-sm-3{-ms-flex-preferred-size:25%;flex-basis:25%;max-width:25%}.col-sm-4{-ms-flex-preferred-size:33.33333333%;flex-basis:33.33333333%;max-width:33.33333333%}.col-sm-5{-ms-flex-preferred-size:41.66666667%;flex-basis:41.66666667%;max-width:41.66666667%}.col-sm-6{-ms-flex-preferred-size:50%;flex-basis:50%;max-width:50%}.col-sm-7{-ms-flex-preferred-size:58.33333333%;flex-basis:58.33333333%;max-width:58.33333333%}.col-sm-8{-ms-flex-preferred-size:66.66666667%;flex-basis:66.66666667%;max-width:66.66666667%}.col-sm-9{-ms-flex-preferred-size:75%;flex-basis:75%;max-width:75%}.col-sm-10{-ms-flex-preferred-size:83.33333333%;flex-basis:83.33333333%;max-width:83.33333333%}.col-sm-11{-ms-flex-preferred-size:91.66666667%;flex-basis:91.66666667%;max-width:91.66666667%}.col-sm-12{-ms-flex-preferred-size:100%;flex-basis:100%;max-width:100%}.col-sm-offset-0{margin-left:0}.col-sm-offset-1{margin-left:8.33333333%}.col-sm-offset-2{margin-left:16.66666667%}.col-sm-offset-3{margin-left:25%}.col-sm-offset-4{margin-left:33.33333333%}.col-sm-offset-5{margin-left:41.66666667%}.col-sm-offset-6{margin-left:50%}.col-sm-offset-7{margin-left:58.33333333%}.col-sm-offset-8{margin-left:66.66666667%}.col-sm-offset-9{margin-left:75%}.col-sm-offset-10{margin-left:83.33333333%}.col-sm-offset-11{margin-left:91.66666667%}.start-sm{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;text-align:start}.center-sm{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;text-align:center}.end-sm{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;text-align:end}.top-sm{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.middle-sm{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.bottom-sm{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.around-sm{-ms-flex-pack:distribute;justify-content:space-around}.between-sm{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.first-sm{-webkit-box-ordinal-group:0;-ms-flex-order:-1;order:-1}.last-sm{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}}@media only screen and (min-width:64em){.container{width:65rem}.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-offset-0,.col-md-offset-1,.col-md-offset-10,.col-md-offset-11,.col-md-offset-12,.col-md-offset-2,.col-md-offset-3,.col-md-offset-4,.col-md-offset-5,.col-md-offset-6,.col-md-offset-7,.col-md-offset-8,.col-md-offset-9{box-sizing:border-box;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:none;padding-right:.5rem;padding-left:.5rem}.col-md{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-preferred-size:0;flex-basis:0;max-width:100%}.col-md-1{-ms-flex-preferred-size:8.33333333%;flex-basis:8.33333333%;max-width:8.33333333%}.col-md-2{-ms-flex-preferred-size:16.66666667%;flex-basis:16.66666667%;max-width:16.66666667%}.col-md-3{-ms-flex-preferred-size:25%;flex-basis:25%;max-width:25%}.col-md-4{-ms-flex-preferred-size:33.33333333%;flex-basis:33.33333333%;max-width:33.33333333%}.col-md-5{-ms-flex-preferred-size:41.66666667%;flex-basis:41.66666667%;max-width:41.66666667%}.col-md-6{-ms-flex-preferred-size:50%;flex-basis:50%;max-width:50%}.col-md-7{-ms-flex-preferred-size:58.33333333%;flex-basis:58.33333333%;max-width:58.33333333%}.col-md-8{-ms-flex-preferred-size:66.66666667%;flex-basis:66.66666667%;max-width:66.66666667%}.col-md-9{-ms-flex-preferred-size:75%;flex-basis:75%;max-width:75%}.col-md-10{-ms-flex-preferred-size:83.33333333%;flex-basis:83.33333333%;max-width:83.33333333%}.col-md-11{-ms-flex-preferred-size:91.66666667%;flex-basis:91.66666667%;max-width:91.66666667%}.col-md-12{-ms-flex-preferred-size:100%;flex-basis:100%;max-width:100%}.col-md-offset-0{margin-left:0}.col-md-offset-1{margin-left:8.33333333%}.col-md-offset-2{margin-left:16.66666667%}.col-md-offset-3{margin-left:25%}.col-md-offset-4{margin-left:33.33333333%}.col-md-offset-5{margin-left:41.66666667%}.col-md-offset-6{margin-left:50%}.col-md-offset-7{margin-left:58.33333333%}.col-md-offset-8{margin-left:66.66666667%}.col-md-offset-9{margin-left:75%}.col-md-offset-10{margin-left:83.33333333%}.col-md-offset-11{margin-left:91.66666667%}.start-md{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;text-align:start}.center-md{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;text-align:center}.end-md{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;text-align:end}.top-md{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.middle-md{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.bottom-md{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.around-md{-ms-flex-pack:distribute;justify-content:space-around}.between-md{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.first-md{-webkit-box-ordinal-group:0;-ms-flex-order:-1;order:-1}.last-md{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}}@media only screen and (min-width:75em){.container{width:76rem}.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-offset-0,.col-lg-offset-1,.col-lg-offset-10,.col-lg-offset-11,.col-lg-offset-12,.col-lg-offset-2,.col-lg-offset-3,.col-lg-offset-4,.col-lg-offset-5,.col-lg-offset-6,.col-lg-offset-7,.col-lg-offset-8,.col-lg-offset-9{box-sizing:border-box;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:none;padding-right:.5rem;padding-left:.5rem}.col-lg{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-preferred-size:0;flex-basis:0;max-width:100%}.col-lg-1{-ms-flex-preferred-size:8.33333333%;flex-basis:8.33333333%;max-width:8.33333333%}.col-lg-2{-ms-flex-preferred-size:16.66666667%;flex-basis:16.66666667%;max-width:16.66666667%}.col-lg-3{-ms-flex-preferred-size:25%;flex-basis:25%;max-width:25%}.col-lg-4{-ms-flex-preferred-size:33.33333333%;flex-basis:33.33333333%;max-width:33.33333333%}.col-lg-5{-ms-flex-preferred-size:41.66666667%;flex-basis:41.66666667%;max-width:41.66666667%}.col-lg-6{-ms-flex-preferred-size:50%;flex-basis:50%;max-width:50%}.col-lg-7{-ms-flex-preferred-size:58.33333333%;flex-basis:58.33333333%;max-width:58.33333333%}.col-lg-8{-ms-flex-preferred-size:66.66666667%;flex-basis:66.66666667%;max-width:66.66666667%}.col-lg-9{-ms-flex-preferred-size:75%;flex-basis:75%;max-width:75%}.col-lg-10{-ms-flex-preferred-size:83.33333333%;flex-basis:83.33333333%;max-width:83.33333333%}.col-lg-11{-ms-flex-preferred-size:91.66666667%;flex-basis:91.66666667%;max-width:91.66666667%}.col-lg-12{-ms-flex-preferred-size:100%;flex-basis:100%;max-width:100%}.col-lg-offset-0{margin-left:0}.col-lg-offset-1{margin-left:8.33333333%}.col-lg-offset-2{margin-left:16.66666667%}.col-lg-offset-3{margin-left:25%}.col-lg-offset-4{margin-left:33.33333333%}.col-lg-offset-5{margin-left:41.66666667%}.col-lg-offset-6{margin-left:50%}.col-lg-offset-7{margin-left:58.33333333%}.col-lg-offset-8{margin-left:66.66666667%}.col-lg-offset-9{margin-left:75%}.col-lg-offset-10{margin-left:83.33333333%}.col-lg-offset-11{margin-left:91.66666667%}.start-lg{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;text-align:start}.center-lg{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;text-align:center}.end-lg{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;text-align:end}.top-lg{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.middle-lg{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.bottom-lg{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.around-lg{-ms-flex-pack:distribute;justify-content:space-around}.between-lg{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.first-lg{-webkit-box-ordinal-group:0;-ms-flex-order:-1;order:-1}.last-lg{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}}</style>
  

  

  <link href="/index.xml" rel="alternate" type="application/rss+xml"
    title="赵大宝的博客">
  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css?family=Bree+Serif|Bungee+Shade" rel="stylesheet">
  
  

  
  
</head>


<body>
  <article class="post " id="article">
    <div class="row">
      <div class="col-xs-12">
        <div class="site-header">
          
<header>
  <div class="header-title">
    <a href="/"
      >赵大宝</a
    >
  </div>
  <div class="header-subtitle">以无用之事，修自在之心</div>
</header>
<div class="row end-md center-xs header-items">
  
  <div class="header-item">
    <a href="/index.xml" target="_blank">RSS</a>
  </div>
  
</div>
<div class="row end-xs">
   
</div>
<div class="header-line"></div>

        </div>
        <header class="post-header">
          <h1 class="post-title">链路追踪：如何定制一个分布式链路跟踪系统</h1>
          
          <div class="row post-desc">
            <div class="col-xs-6">
              
              <time class="post-date" datetime="2023-08-15 15:50:03 CST">
                15 Aug 2023
              </time>
              
            </div>
            <div class="col-xs-6">
              
              <div class="post-author">
                <a target="_blank" href="https://dabao-zhao.github.io">@赵大宝</a>
              </div>
              
            </div>
          </div>
          
        </header>

        <div class="post-content markdown-body">
          
          <h3 id="metricstracing-和-logging">Metrics、Tracing 和 Logging</h3>
<p>常见监控系统主要有三种类型：Metrics、Tracing 和 Logging。</p>
<p>常见的开源 Metrics 有 Zabbix、Nagios、Prometheus、InfluxDb、OpenFalcon。主要做各种量化指标汇总统计，比如监控系统的容量剩余、每秒请求量、平均响应速度、某个时段请求量多少。</p>
<p>常见的开源链路跟踪有 Jaeger、Zipkin、Pinpoint、Skywalking。主要是通过分析每次请求链路监控分析的系统，可以通过 TraceID 查找一次请求的依赖及调用链路，分析故障点和传导过程的耗时。</p>
<p>常见的开源 Logging 有 ELK、Loki、Loggly。主要是对文本日志的收集归类整理，可以对错误日志进行汇总、警告，并分析系统错误异常等情况。</p>
<p>三种监控体系最大的区别就是日志格式标准。</p>
<h3 id="opentelemetry-标准">OpenTelemetry 标准</h3>
<p>主要是对数据采集和标准规范的统一，其他的不参与。</p>
<blockquote>
<p>TODO 后面出个介绍</p>
</blockquote>
<h3 id="分布式链路跟踪系统">分布式链路跟踪系统</h3>
<p>主要功能服务：</p>
<ul>
<li>监控日志标准</li>
<li>埋点 SDK（AOP 或侵入式）</li>
<li>日志收集</li>
<li>分布式日志传输</li>
<li>分布式日志存储</li>
<li>分布式检索计算</li>
<li>分布式实时分析</li>
<li>个性化定制指标盘</li>
<li>系统警告</li>
</ul>
<p>ELK 即可实现以上功能：</p>
<ul>
<li>日志收集（Filebeat）</li>
<li>日志传输（Kafka+Logstash）</li>
<li>日志存储（Elasticsearch）</li>
<li>检索计算（Elasticsearch + Kibana）</li>
<li>实时分析（Kibana）</li>
<li>个性定制表格查询（Kibana）
这样之后只需要制定日志格式和埋点 SDK 即可实现一个具有分布式链路跟踪、 Metrics、日志分析的系统。</li>
</ul>
<blockquote>
<p>这里提到的不只是 ELK，还有 EFK
TODO 后面出个介绍</p>
</blockquote>
<h4 id="原理">原理</h4>
<p>在请求发起方发送请求时或服务被请求时生成一个 UUID（TraceID），被请求期间的业务产生的任何日志（Warning、Info、Debug、Error）、任何依赖资源
请求（MySQL、Kafka、Redis）、任何内部接口调用（Restful、Http、RPC）都会带上这个 UUID。
这样，当我们把所有拥有同样 UUID 的日志收集起来时，就可以根据时间（有误差）、RPCID 或 SpanID，将它们按依赖请求顺序串起来。
只要日志足够详细，我们就能监控到系统大部分的工作状态，比如用户请求一个服务会调用多少个接口，每个数据查询的 SQL 以及具体耗时调用的内网请求参数是什么、
调用的内网请求返回是什么、内网被请求的接口又做了哪些操作、产生了哪些异常信息等等。
同时，我们可以通过对这些日志做归类分析，分析项目之间的调用关系、项目整体健康程度、 对链路深挖自动识别出故障点等，帮助我们主动、快速地查找问题。</p>
<h3 id="traceidrpcidspanid">TraceID、RPCID、SpanID</h3>
<p>TraceID 用于标识某一次具体的请求 ID。
SpanID 用于标识单个服务中的一个操作。
RPCID 用于标识操作在整个调用链路中的位置。</p>
<blockquote>
<p>TODO 后面出个介绍</p>
</blockquote>
<h4 id="传递的方式">传递的方式</h4>
<ul>
<li>HTTP 协议放在 Header；</li>
<li>RPC 协议放在 meta 中传递；</li>
<li>队列可以放在消息体的 Header 中，或直接在消息体中传递；</li>
<li>其他特殊情况下可以通过网址请求参数传递。</li>
<li>应用内多线程和多协程之间通过 Context</li>
</ul>
<p>设置类似 X-DEBUG Header 等于 1 时，可以开启在线 debug 模式，在被调用接口及所有依赖的服务都会输出 debug 级别的日志，这样我们临时排查线上问题会更方便</p>
<h3 id="日志格式样例">日志格式样例</h3>
<pre tabindex="0"><code>{
    &#34;name&#34;: &#34;string:全量字段介绍,必填，用于区分日志类型，上面的日志列表内容写这里&#34;,
    &#34;trace_id&#34;: &#34;string:traceid，必填&#34;,
    &#34;rpc_id&#34;: &#34;string:RPCID，服务端链路必填，客户端非必填&#34;,
    &#34;department&#34;:&#34;部门缩写如client_frontend 必填&#34;,
    &#34;version&#34;: &#34;string:当前服务版本 cpp-client-1.1 php-baseserver-1.4 java-rti-1.
    &#34;timestamp&#34;: &#34;int:日志记录时间，单位秒，必填&#34;,
    &#34;duration&#34;: &#34;float:消耗时间，浮点数 单位秒，能填就填&#34;,
    &#34;module&#34;: &#34;string:模块路径，建议格式应用名称_模块名称_函数名称_动作，必填&#34;,
    &#34;source&#34;: &#34;string:请求来源 如果是网页可以记录ref page，选填&#34;,
    &#34;uid&#34;: &#34;string:当前用户uid，如果没有则填写为 0长度字符串，可选填，能够帮助分析用户一段时
    &#34;pid&#34;: &#34;string:进程pid，如果没有填写为 0长度字符串，如果有线程可以为pid-tid格式，可选填
    &#34;server_ip&#34;: &#34;string 当前服务器ip，必填&#34;,
    &#34;client_ip&#34;: &#34;string 客户端ip，选填&#34;,
    &#34;user_agent&#34;: &#34;string curl/7.29.0 选填&#34;,
    &#34;host&#34;: &#34;string 链接目标的ip及端口号，用于区分环境12.123.23.1:3306，选填&#34;,
    &#34;instance_name&#34;: &#34;string 数据库连接配置的标识，比如rti的数据库连接，选填&#34;,
    &#34;db&#34;: &#34;string 数据库名称如：peiyou_stastic，选填&#34;,
    &#34;code&#34;: &#34;string:各种驱动或错误或服务的错误码，选填，报错误必填&#34;,
    &#34;msg&#34;: &#34;string 错误信息或其他提示信息，选填，报错误必填&#34;,
    &#34;backtrace&#34;: &#34;string 错误的backtrace信息，选填，报错误必填&#34;,
    &#34;action&#34;: &#34;string 可以是url、sql、redis命令、所有让远程执行的命令，必填&#34;,
    &#34;param&#34;: &#34;string 通用参数模板，用于和script配合，记录所有请求参数，必填&#34;,
    &#34;file&#34;: &#34;string userinfo.php，选填&#34;,
    &#34;line&#34;: &#34;string 232，选填&#34;,
    &#34;response&#34;: &#34;string:请求返回的结果，可以是本接口或其他资源返回的数据，如果数据太长会影响
    &#34;response_length&#34;: &#34;int:相应内容结果的长度，选填&#34;,
    &#34;dns_duration&#34;: &#34;float dns解析时间，一般http mysql请求域名的时候会出现此选项，选填&#34;,
    &#34;extra&#34;: &#34;json 放什么都可以,用户所有附加数据都扔这里&#34;
}
## 样例
### 被请求日志
{
    &#34;x_name&#34;: &#34;request.info&#34;,
    &#34;x_trace_id&#34;: &#34;123jiojfdsao&#34;,
    &#34;x_rpc_id&#34;: &#34;0.1&#34;,
    &#34;x_version&#34;: &#34;php-baseserver-4.0&#34;,
    &#34;x_department&#34;:&#34;tal_client_frontend&#34;,
    &#34;x_timestamp&#34;: 1506480162,
    &#34;x_duration&#34;: 0.021,
    &#34;x_uid&#34;: &#34;9527&#34;,
    &#34;x_pid&#34;: &#34;123&#34;,
    &#34;x_module&#34;: &#34;js_game1_start&#34;,
    &#34;x_user_agent&#34;: &#34;string curl/7.29.0&#34;,
    &#34;x_action&#34;: &#34;http://testapi.speiyou.com/v3/user/getinfo?id=9527&#34;,
    &#34;x_server_ip&#34;: &#34;192.168.1.1:80&#34;,
    &#34;x_client_ip&#34;: &#34;192.168.1.123&#34;,
    &#34;x_param&#34;: &#34;json string&#34;,
    &#34;x_source&#34;: &#34;www.baidu.com&#34;,
    &#34;x_code&#34;: &#34;200&#34;,
    &#34;x_response&#34;: &#34;json:api result&#34;,
    &#34;x_response_len&#34;: 12324
}
### mysql 链接性能日志
{
    &#34;x_name&#34;: &#34;mysql.connect&#34;,
    &#34;x_trace_id&#34;: &#34;123jiojfdsao&#34;,
    &#34;x_rpc_id&#34;: &#34;0.2&#34;,
    &#34;x_version&#34;: &#34;php-baseserver-4&#34;,
    &#34;x_department&#34;:&#34;tal_client_frontend&#34;,
    &#34;x_timestamp&#34;: 1506480162,
    &#34;x_duration&#34;: 0.024,
    &#34;x_uid&#34;: &#34;9527&#34;,
    &#34;x_pid&#34;: &#34;123&#34;,
    &#34;x_module&#34;: &#34;js_mysql_connect&#34;,
    &#34;x_instance_name&#34;: &#34;default&#34;,
    &#34;x_host&#34;: &#34;12.123.23.1:3306&#34;,
    &#34;x_db&#34;: &#34;tal_game_round&#34;,
    &#34;x_msg&#34;: &#34;ok&#34;,
    &#34;x_code&#34;: &#34;1&#34;,
    &#34;x_response&#34;: &#34;json:****&#34;
}
### Mysql 请求日志
{
    &#34;x_name&#34;: &#34;mysql.request&#34;,
    &#34;x_trace_id&#34;: &#34;123jiojfdsao&#34;,
    &#34;x_rpc_id&#34;: &#34;0.2&#34;,
    &#34;x_version&#34;: &#34;php-4&#34;,
    &#34;x_department&#34;:&#34;tal_client_frontend&#34;,
    &#34;x_timestamp&#34;: 1506480162,
    &#34;x_duration&#34;: 0.024,
    &#34;x_uid&#34;: &#34;9527&#34;,
    &#34;x_pid&#34;: &#34;123&#34;,
    &#34;x_module&#34;: &#34;js_game1_round_sigup&#34;,
    &#34;x_instance_name&#34;: &#34;default&#34;,
    &#34;x_host&#34;: &#34;12.123.23.1:3306&#34;,
    &#34;x_db&#34;: &#34;tal_game_round&#34;,
    &#34;x_action&#34;: &#34;select * from xxx where xxxx&#34;,
    &#34;x_param&#34;: &#34;json string&#34;,
    &#34;x_code&#34;: &#34;1&#34;,
    &#34;x_msg&#34;: &#34;ok&#34;,
    &#34;x_response&#34;: &#34;json:****&#34;
}
### http 请求日志
{
    &#34;x_name&#34;: &#34;http.post&#34;,
    &#34;x_trace_id&#34;: &#34;123jiojfdsao&#34;,
    &#34;x_department&#34;:&#34;tal_client_frontend&#34;,
    &#34;x_rpc_id&#34;: &#34;0.3&#34;,
    &#34;x_version&#34;: &#34;php-4&#34;,
    &#34;x_timestamp&#34;: 1506480162,
    &#34;x_duration&#34;: 0.214,
    &#34;x_uid&#34;: &#34;9527&#34;,
    &#34;x_pid&#34;: &#34;123&#34;,
    &#34;x_module&#34;: &#34;js_game1_round_win_report&#34;,
    &#34;x_action&#34;: &#34;http://testapi.speiyou.com/v3/game/report&#34;,
    &#34;x_param&#34;: &#34;json:&#34;,
    &#34;x_server_ip&#34;: &#34;192.168.1.1&#34;,
    &#34;x_msg&#34;: &#34;ok&#34;,
    &#34;x_code&#34;: &#34;200&#34;,
    &#34;x_response_len&#34;: 12324,
    &#34;x_response&#34;: &#34;json:responsexxxx&#34;,
    &#34;x_dns_duration&#34;: 0.001
}
### level log info日志
{
    &#34;x_name&#34;: &#34;log.info&#34;,
    &#34;x_trace_id&#34;: &#34;123jiojfdsao&#34;,
    &#34;x_department&#34;:&#34;tal_client_frontend&#34;,
    &#34;x_rpc_id&#34;: &#34;0.3&#34;,
    &#34;x_version&#34;: &#34;php-4&#34;,
    &#34;x_timestamp&#34;: 1506480162,
    &#34;x_duration&#34;: 0.214,
    &#34;x_uid&#34;: &#34;9527&#34;,
    &#34;x_pid&#34;: &#34;123&#34;,
    &#34;x_module&#34;: &#34;game1_round_win_round_end&#34;,
    &#34;x_file&#34;: &#34;userinfo.php&#34;,
    &#34;x_line&#34;: &#34;232&#34;,
    &#34;x_msg&#34;: &#34;ok&#34;,
    &#34;x_code&#34;: &#34;201&#34;,
    &#34;extra&#34;: &#34;json game_id lesson_num xxxxx&#34;
}
### exception 异常日志
{
    &#34;x_name&#34;: &#34;log.exception&#34;,
    &#34;x_trace_id&#34;: &#34;123jiojfdsao&#34;,
    
    &#34;x_department&#34;:&#34;tal_client_frontend&#34;,
    &#34;x_rpc_id&#34;: &#34;0.3&#34;,
    &#34;x_version&#34;: &#34;php-4&#34;,
    &#34;x_timestamp&#34;: 1506480162,
    &#34;x_duration&#34;: 0.214,
    &#34;x_uid&#34;: &#34;9527&#34;,
    &#34;x_pid&#34;: &#34;123&#34;,
    &#34;x_module&#34;: &#34;game1_round_win&#34;,
    &#34;x_file&#34;: &#34;userinfo.php&#34;,
    &#34;x_line&#34;: &#34;232&#34;,
    &#34;x_msg&#34;: &#34;exception:xxxxx call stack&#34;,
    &#34;x_code&#34;: &#34;hy20001&#34;,
    &#34;x_backtrace&#34;: &#34;xxxxx.php(123) gotError:...&#34;
}
### 业务自发告警日志
{
    &#34;x_name&#34;: &#34;log.alarm&#34;,
    &#34;x_trace_id&#34;: &#34;123jiojfdsao&#34;,
    &#34;x_department&#34;:&#34;tal_client_frontend&#34;,
    &#34;x_rpc_id&#34;: &#34;0.3&#34;,
    &#34;x_version&#34;: &#34;php-4&#34;,
    &#34;x_timestamp&#34;: 1506480162,
    &#34;x_duration&#34;: 0.214,
    &#34;x_uid&#34;: &#34;9527&#34;,
    &#34;x_pid&#34;: &#34;123&#34;,
    &#34;x_module&#34;: &#34;game1_round_win_round_report&#34;,
    &#34;x_file&#34;: &#34;game_win_notify.php&#34;,
    &#34;x_line&#34;: &#34;123&#34;,
    &#34;x_msg&#34;: &#34;game report request fail! retryed three time..&#34;,
    &#34;x_code&#34;: &#34;201&#34;,
    &#34;x_extra&#34;: &#34;json game_id lesson_num xxxxx&#34;
}
### matrics 计数器
{
    &#34;x_name&#34;: &#34;metrix.count&#34;,
    &#34;x_trace_id&#34;: &#34;123jiojfdsao&#34;,
    &#34;x_department&#34;:&#34;tal_client_frontend&#34;,
    &#34;x_rpc_id&#34;: &#34;0.3&#34;,
    &#34;x_version&#34;: &#34;php-4&#34;,
    &#34;x_timestamp&#34;: 1506480162,
    &#34;x_uid&#34;: &#34;9527&#34;,
    &#34;x_pid&#34;: &#34;123&#34;,
    &#34;x_module&#34;: &#34;game1_round_win_click&#34;,
    &#34;x extra&#34;: &#34;json curl invoke count&#34;
}
</code></pre><blockquote>
<p>Q: 为什么大部分设计都是记录依赖资源的日志呢？<br>
A: 在于在没有 IO 的情况下，程序大部分都是可控的（侧重计算的服务除外）。只有 IO 类操作容易出现不稳定因素，并且日志记录过多也会影响系统性能，通过记录对数据源的操作能帮助我们排查业务逻辑的错误。<br>
Q: 如何提高日志的写吞吐能力?<br>
A: 1、提高写线程的个数，一个线程写一个日志，也可以每个日志文件单独放一个磁盘，但是你要注意控制系统的 IOPS 不要超过 100；<br>
  2、当写入日志长度超过 1kb 时，不要使用多个线程高并发写同一个文件。原因是文件的 append 操作对于写入长度超过缓冲区长度的操作不是原子性的，多线程并发写长内容到同一个文件，会导致日志乱序；<br>
  3、日志可以通过内存暂存，汇总达到一定数据量或缓存超过 2 秒后再落盘，这样可以减少过小日志写磁盘系统的调用次数，但是代价是被强杀时会丢日志； <br>
  4、日志缓存要提前 malloc 使用固定长度缓存，不要频繁分配回收，否则会导致系统整体缓慢；<br>
  5、服务被 kill 时，记得拦截信号，快速 fsync 内存中日志到磁盘，以此减少日志丢失的可能。</p>
</blockquote>

        </div>

        <div class="row middle-xs">
          <div class="col-xs-12">
            
            <div class="post-tags">
              <a href="/tags/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F%E5%AE%9E%E6%88%98%E8%AF%BE/">
                高并发系统实战课
              </a>
            </div>
            
          </div>
        </div>
        
          <div class="row">
            <div class="col-xs-12">
              
            </div>
          </div>

          

<div class="related-content">
  <h3>Related Posts</h3>
  <ul>
    
    <li><a href="/posts/%E7%A8%80%E7%96%8F%E7%B4%A2%E5%BC%95%E4%B8%BA%E4%BB%80%E4%B9%88%E9%AB%98%E5%B9%B6%E5%8F%91%E5%86%99%E4%B8%8D%E6%8E%A8%E8%8D%90%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93/">稀疏索引：为什么高并发写不推荐关系数据库</a></li>
    
    <li><a href="/posts/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%A4%9A%E6%9C%8D%E5%8A%A1%E7%9A%842pctcc%E9%83%BD%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84/">分布式事务：多服务的2PC、TCC都是怎么实现的</a></li>
    
    <li><a href="/posts/%E7%B3%BB%E7%BB%9F%E9%9A%94%E7%A6%BB%E5%A6%82%E4%BD%95%E5%BA%94%E5%AF%B9%E9%AB%98%E5%B9%B6%E5%8F%91%E6%B5%81%E9%87%8F%E5%86%B2%E5%87%BB/">系统隔离：如何应对高并发流量冲击</a></li>
    
  </ul>
</div>



          
          
          <div style="height: 50px;"></div>
          
        

        <div class="site-footer">
  
  
</div>

      </div>
    </div>
  </article>

  

<script>
  
  
    
    
  
</script>

  

</body>

</html>